// Redis Cluster Client Configuration
// Generated by start_red_stream_echo.sh
// Based on recommendations from Echo (Head of MemCommsOps)

const { createCluster } = require('redis');

// Create a Redis cluster client
function createRedisClient() {
  const redis = createCluster({
    rootNodes: [
      {
        url: 'redis://genesis:d5d7817937232ca5@127.0.0.1:7000'
      },
      {
        url: 'redis://genesis:d5d7817937232ca5@127.0.0.1:7001'
      },
      {
        url: 'redis://genesis:d5d7817937232ca5@127.0.0.1:7002'
      }
    ],
    defaults: {
      socket: {
        reconnectStrategy: (retries) => Math.min(retries * 50, 1000)
      }
    }
  });

  return redis;
}

module.exports = { createRedisClient };
